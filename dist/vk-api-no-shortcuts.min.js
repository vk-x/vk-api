/*! vk-api v0.3.0 (c) Nikita Litvin, git.io/vwqn6 */
!function(n,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.vk=e():n.vk=e()}(this,function(){return function(n){function e(o){if(t[o])return t[o].exports;var r=t[o]={exports:{},id:o,loaded:!1};return n[o].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var t={};return e.m=n,e.c=t,e.p="",e(0)}([function(n,e,t){var o;o=t(1),n.exports=o},function(n,e){var t,o={}.hasOwnProperty;t=6,n.exports={version:"5.50",getAuthUrl:function(n,e,t){var o,r,i,u,s,c;return this.appId=null!=n?n:this.appId,null==e&&(e=[]),r=null!=t?t:{},this.version=null!=(i=r.version)?i:this.version,c=null!=(u=r.windowStyle)?u:"popup",o=null!=(s=r.redirectUrl)?s:"https://oauth.vk.com/blank.html","https://oauth.vk.com/authorize?client_id="+this.appId+"&scope="+e.join(",")+"&redirect_uri="+encodeURIComponent(o)+"&"+("display="+c+"&v="+this.version+"&response_type=token")},authWebsite:function(n,e,t,o){return null==t&&(t="popup"),null==o&&(o=function(){}),new Promise(function(r){return function(i,u){return r.getAccessToken(n).then(function(r){var u,s,c;return r?(o(r),i(r)):(u=this.getAuthUrl(n,e,{windowStyle:t,redirectUrl:"close.html"}),c=window.open(u),s=window.setInterval(function(e){return function(){return c.closed?(window.clearInterval(s),e.getAccessToken(n).then(function(n){return o(n),i(n)})):void 0}}(this),100))})}}(this))},getAccessToken:function(n,e){return this.appId=null!=n?n:this.appId,null==e&&(e=function(){}),new Promise(function(n){return function(t,o){return n.request("GET","https://login.vk.com/",{act:"openapi",oauth:1,"new":1,aid:n.appId,location:window.document.location.hostname},function(o){var r;return r=o.access_token,n.accessToken=null!=r?r:null,e(n.accessToken),t(n.accessToken)})}}(this))},request:function(n,e,t,r){var i,u,s,c;switch(c=new XMLHttpRequest,c.withCredentials=!0,c.onload=function(){return r(JSON.parse(this.responseText))},u=function(){var n;n=[];for(i in t)o.call(t,i)&&(s=t[i],n.push(encodeURIComponent(i)+"="+encodeURIComponent(s)));return n}().join("&"),n){case"GET":return c.open(n,e+"?"+u),c.send();case"POST":return c.open(n,e),c.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),c.send(u)}},method:function(n,e,o){return null==e&&(e={}),null==o&&(o=function(){}),e.access_token=this.accessToken,e.v=this.version,new Promise(function(r){return function(i,u){var s;return(s=function(){return r.request("POST","https://api.vk.com/method/"+n,e,function(n){var e,r;return e=n.error,r=n.response,null!=e?e.error_code===t?setTimeout(s,300):(o(e,r),u(e)):(o(e,r),i(r))})})()}}(this))}}}])});