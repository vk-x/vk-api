/*! vk-api v0.3.1 (c) Nikita Litvin, git.io/vwqn6 */
!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.vk=n():e.vk=n()}(this,function(){return function(e){function n(o){if(t[o])return t[o].exports;var r=t[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n,t){var o;o=t(1),e.exports=o},function(e,n){var t,o={}.hasOwnProperty;t=6,e.exports={version:"5.50",getAuthUrl:function(e,n,t){var o,r,i,u,s,c;return this.appId=null!=e?e:this.appId,null==n&&(n=[]),r=null!=t?t:{},this.version=null!=(i=r.version)?i:this.version,c=null!=(u=r.windowStyle)?u:"popup",o=null!=(s=r.redirectUrl)?s:"https://oauth.vk.com/blank.html","https://oauth.vk.com/authorize?client_id="+this.appId+"&scope="+n.join(",")+"&redirect_uri="+encodeURIComponent(o)+"&"+("display="+c+"&v="+this.version+"&response_type=token")},authWebsite:function(e,n,t,o){return null==t&&(t="popup"),null==o&&(o=function(){}),new Promise(function(r){return function(i,u){return r.getAccessToken(e).then(function(r){var u,s,c;return r?(o(r),i(r)):(u=this.getAuthUrl(e,n,{windowStyle:t,redirectUrl:"close.html"}),c=window.open(u),s=window.setInterval(function(n){return function(){return c.closed?(window.clearInterval(s),n.getAccessToken(e).then(function(e){return o(e),i(e)})):void 0}}(this),100))})}}(this))},getAccessToken:function(e,n){return this.appId=null!=e?e:this.appId,null==n&&(n=function(){}),new Promise(function(e){return function(t,o){return e.request({method:"GET",url:"https://login.vk.com/",params:{act:"openapi",oauth:1,"new":1,aid:e.appId,location:window.document.location.hostname},callback:function(o){var r;return r=o.access_token,e.accessToken=null!=r?r:null,n(e.accessToken),t(e.accessToken)},withCredentials:!0})}}(this))},request:function(e){var n,t,r,i,u,s,c,l,a,p;switch(r=e.method,c=e.url,i=e.params,n=e.callback,a=null!=(u=e.withCredentials)?u:!1,p=new XMLHttpRequest,p.withCredentials=a,p.onload=function(){return n(JSON.parse(this.responseText))},s=function(){var e;e=[];for(t in i)o.call(i,t)&&(l=i[t],e.push(encodeURIComponent(t)+"="+encodeURIComponent(l)));return e}().join("&"),r){case"GET":return p.open(r,c+"?"+s),p.send();case"POST":return p.open(r,c),p.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),p.send(s)}},method:function(e,n,o){return null==n&&(n={}),null==o&&(o=function(){}),n.access_token=this.accessToken,n.v=this.version,new Promise(function(r){return function(i,u){var s;return(s=function(){return r.request({method:"POST",url:"https://api.vk.com/method/"+e,params:n,callback:function(e){var n,r;return n=e.error,r=e.response,null!=n?n.error_code===t?setTimeout(s,300):(o(n,r),u(n)):(o(n,r),i(r))}})})()}}(this))}}}])});