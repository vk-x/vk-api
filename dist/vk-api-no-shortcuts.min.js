/*! vk-api v0.2.0 (c) Nikita Litvin, git.io/vwqn6 */
!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.vk=n():e.vk=n()}(this,function(){return function(e){function n(o){if(t[o])return t[o].exports;var r=t[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n,t){var o;o=t(1),e.exports=o},function(e,n){var t,o={}.hasOwnProperty;t=6,e.exports={version:"5.50",getAuthUrl:function(e,n,t){var o,r,s,i,u,c;return this.appId=null!=e?e:this.appId,null==n&&(n=[]),r=null!=t?t:{},this.version=null!=(s=r.version)?s:this.version,c=null!=(i=r.windowStyle)?i:"popup",o=null!=(u=r.redirectUrl)?u:"https://oauth.vk.com/blank.html","https://oauth.vk.com/authorize?client_id="+this.appId+"&scope="+n.join(",")+"&redirect_uri="+encodeURIComponent(o)+"&"+("display="+c+"&v="+this.version+"&response_type=token")},getAccessToken:function(e,n){return this.appId=null!=e?e:this.appId,null==n&&(n=function(){}),new Promise(function(e){return function(t,o){return e.request("GET","https://login.vk.com/",{act:"openapi",oauth:1,"new":1,aid:e.appId,location:window.document.location.hostname},function(o){var r;return r=o.access_token,e.accessToken=null!=r?r:null,n(e.accessToken),t(e.accessToken)})}}(this))},request:function(e,n,t,r){var s,i,u,c;switch(c=new XMLHttpRequest,c.withCredentials=!0,c.onload=function(){return r(JSON.parse(this.responseText))},i=function(){var e;e=[];for(s in t)o.call(t,s)&&(u=t[s],e.push(encodeURIComponent(s)+"="+encodeURIComponent(u)));return e}().join("&"),e){case"GET":return c.open(e,n+"?"+i),c.send();case"POST":return c.open(e,n),c.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),c.send(i)}},method:function(e,n,o){return null==n&&(n={}),null==o&&(o=function(){}),n.access_token=this.accessToken,n.v=this.version,new Promise(function(r){return function(s,i){var u;return(u=function(){return r.request("POST","https://api.vk.com/method/"+e,n,function(e){var n,r;return n=e.error,r=e.response,null!=n?n.error_code===t?setTimeout(u,300):(o(n,r),i(n)):(o(n,r),s(r))})})()}}(this))}}}])});