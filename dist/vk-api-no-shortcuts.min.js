/*! vk-api v0.4.0 (c) Nikita Litvin, git.io/vwqn6 */
!function(n,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.vk=e():n.vk=e()}(this,function(){return function(n){function e(o){if(t[o])return t[o].exports;var r=t[o]={exports:{},id:o,loaded:!1};return n[o].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var t={};return e.m=n,e.c=t,e.p="",e(0)}([function(n,e,t){var o;o=t(1),n.exports=o},function(n,e){var t,o={}.hasOwnProperty,r=[].slice;t=6,n.exports={version:"5.52",getAuthUrl:function(n,e,t){var o,r,i,u,c,s;return this.appId=null!=n?n:this.appId,null==e&&(e=[]),r=null!=t?t:{},this.version=null!=(i=r.version)?i:this.version,s=null!=(u=r.windowStyle)?u:"popup",o=null!=(c=r.redirectUrl)?c:"https://oauth.vk.com/blank.html","https://oauth.vk.com/authorize?client_id="+this.appId+"&scope="+e.join(",")+"&redirect_uri="+encodeURIComponent(o)+"&"+("display="+s+"&v="+this.version+"&response_type=token")},authWebsite:function(n,e,t,o){return null==t&&(t="popup"),null==o&&(o=function(){}),new Promise(function(r){return function(i,u){return r.getAccessToken(n).then(function(u){var c,s,l;return u?(o(u),i(u)):(c=r.getAuthUrl(n,e,{windowStyle:t,redirectUrl:"close.html"}),l=window.open(c,"vk-api-auth","width=700,height=600"),s=window.setInterval(function(){return l.closed?(window.clearInterval(s),r.getAccessToken(n).then(function(n){return o(n),i(n)})):void 0},100))})}}(this))},authFrame:function(n){return null==n&&(n=function(){}),new Promise(function(e){return function(t,o){return window.VK.init(function(){return n(),t()},function(){return n(!0),o()},e.version)}}(this))},getAccessToken:function(n,e){return this.appId=null!=n?n:this.appId,null==e&&(e=function(){}),new Promise(function(n){return function(t,o){return n.request({method:"GET",url:"https://login.vk.com/",params:{act:"openapi",oauth:1,"new":1,aid:n.appId,location:window.document.location.hostname},callback:function(o){var r;return r=o.access_token,n.accessToken=null!=r?r:null,e(n.accessToken),t(n.accessToken)},withCredentials:!0})}}(this))},request:function(n){var e,t,r,i,u,c,s,l,a,p;switch(r=n.method,s=n.url,i=n.params,e=n.callback,a=null!=(u=n.withCredentials)?u:!1,p=new XMLHttpRequest,p.withCredentials=a,p.onload=function(){return e(JSON.parse(this.responseText))},c=function(){var n;n=[];for(t in i)o.call(i,t)&&(l=i[t],n.push(encodeURIComponent(t)+"="+encodeURIComponent(l)));return n}().join("&"),r){case"GET":return p.open(r,s+"?"+c),p.send();case"POST":return p.open(r,s),p.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),p.send(c)}},method:function(n,e,o){return null==e&&(e={}),null==o&&(o=function(){}),new Promise(function(r){return function(i,u){var c;return(c=function(){var s,l;return l=function(n){var e,r;return e=n.error,r=n.response,null!=e?e.error_code===t?setTimeout(c,300):(o(e,r),u(e)):(o(e,r),i(r))},null!=(null!=(s=window.VK)?s.api:void 0)?window.VK.api(n,e,l):(e.access_token=r.accessToken,e.v=r.version,r.request({method:"POST",url:"https://api.vk.com/method/"+n,params:e,callback:l}))})()}}(this))},clientMethod:function(){var n;return n=1<=arguments.length?r.call(arguments,0):[],window.VK.callMethod.apply(window.VK,n)}}}])});